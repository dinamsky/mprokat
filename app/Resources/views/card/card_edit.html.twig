{% extends 'base.html.twig' %}

{% block stylesheets %}
    {{ parent() }}
    <link href="{{ asset('assets/css/auto-complete.css') }}" rel="stylesheet">
    <link href="{{ asset('assets/css/select2.min.css') }}" rel="stylesheet">
    <link href="{{ asset('assets/css/datepicker.min.css') }}" rel="stylesheet">
{% endblock %}

{% block javascripts %}
    {{ parent() }}
    <script src="{{ asset('assets/js/image_upload_preview.js') }}"></script>
    <script src="{{ asset('assets/js/datepicker.min.js') }}"></script>
    <script src="{{ asset('assets/js/alex/address_change.js') }}"></script>
    <script src="{{ asset('assets/js/alex/transport_change.js') }}"></script>
    {% if not subfields %}<script src="{{ asset('assets/js/get_new_subfields.js') }}"></script>{% endif %}
    {% if app.session.has('promote') %}
        <script src="{{ asset('assets/js/promote.js') }}"></script>
        {{ app.session.remove('promote') }}
    {% endif %}
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDWdm1zrblFjsdUfi1-6fsPvj30ACCiCxk"></script>
{% endblock %}

{% block bodyVars %}data-lang="{{ lang }}"{% endblock %}

{% block content %}
    <div class="uk-container">

        <!-- 1 section -->

        <!-- /1 section -->

        <!-- 2 section -->
        <div class="uk-grid-medium uk-child-width-1-2" uk-grid>
            <div>
                <h3 class="uk-margin-bottom">{% trans %}Измнение типа аренды или проката{% endtrans %}</h3>
                <ul class="uk-list theme-radio-list">
                    <li><label><input class="uk-radio theme-radio" type="radio" name="serviceTypeId" value="1" {{ card.serviceTypeId == 1 ? 'checked' }}><span>{% trans %}Прокат{% endtrans %}</span></label></li>
                    <li><label><input class="uk-radio theme-radio" type="radio" name="serviceTypeId" value="2" {{ card.serviceTypeId == 2 ? 'checked' }}><span>{% trans %}Аренда{% endtrans %}</span></label></li>
                    <li><label><input class="uk-radio theme-radio" type="radio" name="serviceTypeId" value="3" {{ card.serviceTypeId == 3 ? 'checked' }}><span>{% trans %}Аренда с правом выкупа{% endtrans %}</span></label></li>
                    <li><label><input class="uk-radio theme-radio" type="radio" name="serviceTypeId" disabled><span>{% trans %}Аренда с водителем{% endtrans %}</span></label></li>
                </ul>
            </div>
            <div>
                <div class="uk-h4 uk-margin-bottom">{% trans %}Доставка транспорта клиенту{% endtrans %}</div>
                <ul class="uk-list theme-radio-list">
                    <li><label><input class="uk-radio theme-radio" type="radio" name="deliveryStatus" value="1" {{ card.deliveryStatus == 1 ? 'checked' }}><span>{% trans %}Да с доставкой{% endtrans %}</span></label></li>
                    <li><label><input class="uk-radio theme-radio" type="radio" name="deliveryStatus" value="2" {{ card.deliveryStatus == 2 ? 'checked' }}><span>{% trans %}Возможно{% endtrans %}</span></label></li>
                    <li><label><input class="uk-radio theme-radio" type="radio" name="deliveryStatus" value="0" {{ card.deliveryStatus == 0 ? 'checked' }}><span>{% trans %}Без доставки{% endtrans %}</span></label></li>
                </ul>
            </div>
        </div>
        <div class="uk-sortable-empty"></div>
        <div class="uk-hr uk-align uk-margin-remove-top uk-visible@m"></div>
        <!-- ///2 section -->

        <!-- 3 section -->
        <div class="uk-grid-medium uk-child-width-1-2" uk-grid>
            <div>
                <h3 class="uk-margin-bottom">{% trans %}Изменение типа и группы{% endtrans %}</h3>
                <div class="uk-grid-medium uk-child-width-1-2" uk-grid>
                    <div class="uk-form-stacked">
                        <label class="uk-form-label">{% trans %}Тип транспорта{% endtrans %}</label>
                        <div class="uk-form-controls">
                            <select name="generalTypeTopLevelId" class="uk-select select-border-bottom js-transport-type-select">
                                {{ include('common/ajax_edit_options.html.twig', {'options' : generalTopLevel, 'id' : pgtid, 'hideOptionAll' : true}) }}
                            </select>
                        </div>
                    </div>
                    <div class="uk-form-stacked">
                        <label class="uk-form-label">{% trans %}Группа транспорта{% endtrans %}</label>
                        <div class="uk-form-controls">
                            <select name="generalTypeId" class="uk-select select-border-bottom js-transport-group-select">
                                {{ include( 'common/ajax_edit_options.html.twig', { 'options': generalSecondLevel, 'id': gtid }) }}
                            </select>
                        </div>
                    </div>
                </div>
            </div>

            <div>
                <h3 class="uk-margin-bottom">{% trans %}Изменение марки и модели{% endtrans %}</h3>
                <div class="uk-grid-medium uk-child-width-1-2" uk-grid>
                    <div class="uk-form-stacked">
                        <label class="uk-form-label">{% trans %}Марка{% endtrans %}</label>
                        <div class="uk-form-controls">
                            <select name="mark" class="uk-select select-border-bottom js-transport-mark-select">
                                {{ include( 'common/ajax_edit_options.html.twig', { 'options': marks, 'id': mark.id }) }}
                            </select>
                        </div>
                    </div>
                    <div class="uk-form-stacked">
                        <label class="uk-form-label">{% trans %}Модель{% endtrans %}</label>
                        <div class="uk-form-controls">
                            <select name="modelId" class="uk-select select-border-bottom js-transport-model-select">
                                {{ include( 'common/ajax_edit_options.html.twig', { 'options': models, 'id': model.id }) }}
                            </select>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="uk-sortable-empty"></div>
        <div class="uk-hr uk-align uk-margin-remove-top uk-visible@m"></div>
        <!-- ///3 section -->

        <!-- 4 section -->
        <div class="uk-grid-medium" uk-grid>
            <div class="uk-width-1-1">
                <h3 class="uk-margin-bottom">{% trans %}Измнение расценок{% endtrans %}</h3>
            </div>

            <div class="uk-width-1-2">

                <div class="uk-grid-medium uk-child-width-1-2" uk-grid>
                    <div>
                        <div class="uk-form-stacked">
                            <label class="uk-form-label">{% trans %}Валюта{% endtrans %}</label>
                            <div class="uk-form-controls">
                                <select name="currency" class="uk-select select-border-bottom">
                                    <option value="EUR" {{ card.currency == 'EUR' ? 'selected' }}>EUR</option>
                                    <option value="USD" {{ card.currency == 'USD' ? 'selected' }}>USD</option>
                                    <option value="RUB" {{ card.currency == 'RUB' ? 'selected' }}>RUB</option>
                                </select>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="uk-grid-medium uk-child-width-1-2" uk-grid>
                    <div>
                        <!-- За час -->
                        {% for price in prices if price.id == 1%}
                        <div class="uk-form-stacked uk-align">
                            <label class="uk-form-label">{{ price.header|trans }}</label>
                            <div class="uk-inline uk-width-1-1">
                                <span class="uk-form-icon uk-flex-right uk-form-icon-flip"><i class="fa fa-rub"></i></span>
                                <input type="text"
                                       class="uk-input"
                                       name="price[{{ price.id }}]"
                                       value="{% for cardPrice in card.getCardPrices if cardPrice.priceId == price.id %}{{ cardPrice.value }}{% endfor %}">

                            </div>
                        </div>
                        {% endfor %}
                        <!-- За час -->

                        <!-- За день -->
                        {% for price in prices if price.id == 2%}
                        <div class="uk-form-stacked uk-align">
                            <label class="uk-form-label">{{ price.header|trans }}</label>
                            <div class="uk-inline uk-width-1-1">
                                <span class="uk-form-icon uk-flex-right uk-form-icon-flip"><i class="fa fa-rub"></i></span>
                                <input type="text"
                                       class="uk-input"
                                       name="price[{{ price.id }}]"
                                       value="{% for cardPrice in card.getCardPrices if cardPrice.priceId == price.id %}{{ cardPrice.value }}{% endfor %}">

                            </div>
                        </div>
                        {% endfor %}
                        <!-- За день -->

                        <div class="js-price-list-toggle uk-align uk-margin-top uk-text-right">
                            <a class="link-underline" href="javascript:;" uk-toggle="target: .js-price-list-toggle; animation: uk-animation-fade; queued: true; duration: 300">Добавить расценку</a>
                        </div>

                        <div class="js-price-list-toggle" hidden>
                            {% for price in prices if price.id > 2 and price.id < 7 %}
                            <div class="uk-form-stacked uk-align">
                                <label class="uk-form-label">{{ price.header|trans }}</label>
                                <div class="uk-inline uk-width-1-1">
                                    <span class="uk-form-icon uk-flex-right uk-form-icon-flip"><i class="fa fa-rub"></i></span>
                                    <input type="text"
                                           class="uk-input"
                                           name="price[{{ price.id }}]"
                                           value="{% for cardPrice in card.getCardPrices if cardPrice.priceId == price.id %}{{ cardPrice.value }}{% endfor %}">

                                </div>
                            </div>
                            {% endfor %}
                        </div>

                    </div>
                    <div>
                        <p class="uk-text-muted uk-margin-top">{% trans %}Одна из расценок в час или в день обязательна{% endtrans %}</p>
                        <p class="uk-text-muted">{% trans %}Платформа Мультипрокат добавляет от{% endtrans %} <strong style="color: var(--purple-color);">10 {% trans %}до{% endtrans %} 20 %</strong> {% trans %}к вашей стоимости{% endtrans %}</p>
                    </div>
                </div>

                <div class="uk-flex-bottom uk-grid-medium uk-margin-remove-top uk-child-width-1-2" uk-grid>
                    <div>
                        <div class="uk-form-stacked uk-align">
                            <label class="uk-form-label">{% trans %}Залог{% endtrans %}</label>
                            <div class="uk-inline uk-width-1-1">
                                <span class="uk-form-icon uk-flex-right uk-form-icon-flip"><i class="fa fa-rub"></i></span>
                                <input type="text"
                                       class="uk-input"
                                       name="price[10]"
                                       value="{% for cardPrice in card.getCardPrices if cardPrice.priceId == 10 %}{{ cardPrice.value }}{% endfor %}">

                            </div>
                        </div>
                    </div>
                    <div><p class="uk-text-muted uk-margin-small-bottom">{% trans %}Укажите, если это необходимо{% endtrans %}.</p></div>
                </div>

            </div>

            <div class="uk-width-1-2">
                <div class="uk-text-small">{% trans %}Видео{% endtrans %}:</div>
                <input name="video" class="uk-input" value="{{ card.video }}">
                <iframe src="https://www.youtube-nocookie.com/embed/YE7VzlLtp-4?autoplay=0&amp;showinfo=0&amp;rel=0&amp;modestbranding=1&amp;playsinline=1" width="560" height="315" frameborder="0" allowfullscreen uk-responsive uk-video="automute: true"></iframe>
            </div>
        </div>
        <div class="uk-sortable-empty"></div>
        <div class="uk-hr uk-align uk-margin-remove-top uk-visible@m"></div>
        <!-- ///4 section -->


        <!-- 5 section -->
        <div class="uk-grid-medium uk-child-width-1-2" uk-grid>
            <div>
                <h3 class="uk-margin-bottom">{% trans %}Изменение адреса размещения вашего транспорта{% endtrans %}</h3>
                <div class="uk-grid-medium uk-child-width-1-2" uk-grid>
                    <div>
                        <div class="uk-form-stacked">
                            <label class="uk-form-label">{% trans %}Страна{% endtrans %}</label>
                            <div class="uk-form-controls">
                                <select name="countryCode" class="uk-select select-border-bottom js-address-country-select">
                                    {#{{ include( 'common/ajax_edit_options.html.twig', { 'options': countries, 'id': countryCode }) }}#}
                                    <option hidden disabled selected value>{% trans %}Значение не выбрано{% endtrans %}</option>
                                    <option value="0">{% trans %}Все{% endtrans %}</option>
                                    {% if app.session.has('admin') %}
                                    {% for cntr in countries %}
                                    <option value="{{ cntr.iso3 }}" {{ card.city.country == cntr.iso3 ? 'selected' }}>{{ cntr.header }}</option>
                                    {% endfor %}
                                    {% else %}
                                    <option value="RUS" selected>{% trans %}Россия{% endtrans %}</option>
                                    {% endif %}
                                </select>
                            </div>
                        </div>
                    </div>
                    <div>
                        <div class="uk-form-stacked">
                            <label class="uk-form-label">{% trans %}Регион{% endtrans %}</label>
                            <div class="uk-form-controls">
                                <select name="regionId" class="uk-select select-border-bottom js-address-region-select">
                                    {{ include( 'common/ajax_edit_options.html.twig', { 'options': regions, 'id': regionId }) }}
                                </select>
                            </div>
                        </div>
                    </div>
                    <div>
                        <div class="uk-form-stacked">
                            <label class="uk-form-label">{% trans %}Город{% endtrans %}</label>
                            <div class="uk-form-controls">
                                <select name="cityId" class="uk-select select-border-bottom js-address-city-select">
                                    {{ include( 'common/ajax_edit_options.html.twig', { 'options': cities, 'id': card.cityId }) }}
                                </select>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div>
                <h3 class="uk-margin-bottom">{% trans %}Опишите условия аренды или проката транспорта{% endtrans %}</h3>
                <textarea
                        rows="7"
                        name="content"
                        class="uk-textarea"
                        placeholder="{% trans %}Тут можно указать условия аренды или проката{% endtrans %}"
                >{{ card.content }}</textarea>
            </div>
        </div>
        <!-- ///5 section -->

        <!-- 6 section -->
        <h3 class="uk-margin-bottom uk-margin-large-top">Дополнительная информация 1</h3>
        <div class="uk-grid-medium uk-child-width-1-3" uk-grid>
            subf length : {{ subfields|length }}
            {% for item in subfields %}
            {{ item.label }}
            {% endfor %}

            {% if subfields %}
                {% for item in subfields %}
                <div>
                    <div class="uk-form-stacked">
                        <label class="uk-form-label">{{ item.label }}</label>
                        <div class="uk-form-controls">
                            {% if item.subfield_last is defined %}

                            {{ include('common/ajax_select_edit.html.twig', {
                            'data': item.data,
                            'subfield_last':item.subfield_last,
                            'subfield_first':item.subfield_first,
                            'first':item.first,
                            'level':item.level,
                            'field_id': item.field_id
                            }) }}

                            {% else %}

                            {{ include(item.template, {
                            'options': item.value,
                            'data': item.data,
                            'subfield':item.subfield,
                            }) }}

                            {% endif %}
                        </div>
                    </div>
                </div>
                {% endfor %}
            {% endif %}
        </div>
        <!-- /6 section -->

    </div>
{% endblock %}


